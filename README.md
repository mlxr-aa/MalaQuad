# 麻辣四格

> 短剧题材快速验证应用

一个基于Vue 3 + Vite的PWA（渐进式Web应用），专为短剧创作者设计的快速验证工具。通过"序幕 + 四图四文"的经典叙事结构，帮助创作者快速验证故事概念的可行性和吸引力。

## ✨ 核心功能

### 🎭 经典叙事结构
- **序幕**：故事背景、角色设定、冲突引入
- **第一幕**：故事开始，主要冲突出现
- **第二幕**：冲突发展，情节推进
- **第三幕**：高潮部分，冲突达到顶点
- **尾声**：冲突解决，"二人幸终"的完满结局

### 📱 移动优先设计
- **PWA支持**：可安装到主屏幕，离线使用
- **响应式布局**：适配各种屏幕尺寸
- **触摸优化**：专为移动设备优化的交互体验
- **快速加载**：优化的性能和缓存策略

### 🎨 可视化编辑
- **分步式创作**：逐步引导用户完成故事创作
- **实时预览**：所见即所得的编辑体验
- **图片上传**：支持多种图片格式
- **草稿保存**：自动保存编辑进度

### 📦 主题管理
- **导入导出**：支持主题数据的导入导出
- **批量操作**：支持批量管理主题
- **版本控制**：支持主题的版本管理
- **数据验证**：确保导入数据的完整性

## 📖 使用说明

### 🎯 快速入门
- **[快速开始指南](QUICK-START.md)** - 5分钟快速上手
- **[详细使用说明](docs/user-manual.md)** - 完整功能指南

### 🌐 在线体验
- **应用地址**：https://mlxr-aa.github.io/
- **移动端**：在手机浏览器中打开，可安装为应用

## 🚀 开发指南

### 环境要求

- Node.js >= 18.0.0
- npm >= 8.0.0

### 安装依赖

```bash
npm install
```

### 开发模式

```bash
npm run dev
```

应用将在 `http://localhost:3000` 启动

### 构建应用

```bash
# 标准构建
npm run build

# 生产构建（包含优化）
npm run build:prod
```

### 预览构建结果

```bash
npm run preview
```

## 🌐 Web部署

```bash
# 部署到Web
npm run deploy:web
```

## 🛠️ 开发工具

### 代码检查

```bash
npm run lint
```

### 清理缓存

```bash
npm run clean
```

### 测试

```bash
npm run test
```

## 📁 项目结构

```
MalaQuad/
├── src/
│   ├── components/          # 组件
│   │   ├── Reader/         # 阅读器组件
│   │   └── Editor/         # 编辑器组件
│   ├── views/              # 页面
│   ├── stores/             # 状态管理
│   ├── utils/              # 工具函数
│   ├── types/               # 类型定义
│   └── styles/              # 样式文件
├── public/                  # 静态资源
├── scripts/                 # 构建脚本
└── dist/                    # 构建输出
```

## 🎯 核心功能

### 阅读器
- 序幕展示：封面、标题、背景、作者信息
- 场景展示：图片、文本、加载状态、错误处理
- 导航控制：上一幕/下一幕，进度跳转
- 状态管理：解锁进度，字体缩放，主题切换

### 编辑器
- 可视化编辑：直观的界面，实时预览
- 数据验证：自动验证文本长度、图片规格、结局要求
- 草稿保存：自动保存编辑进度
- 主题管理：创建、编辑、预览、保存主题

### 主题管理
- CRUD操作：创建、读取、更新、删除主题
- 导入导出：JSON格式的主题数据交换
- 批量操作：支持批量导出和数据清空
- 数据验证：确保导入数据的完整性

## 🔧 技术栈

### 前端技术
- **框架**：Vue 3 + TypeScript
- **构建工具**：Vite
- **状态管理**：Pinia
- **路由管理**：Vue Router
- **样式**：CSS Variables + 响应式设计

### PWA技术
- **Service Worker**：离线缓存和自动更新
- **Web App Manifest**：应用配置和安装支持
- **缓存策略**：智能缓存管理
- **安装提示**：跨平台安装指导

### 开发工具
- **代码检查**：Vue TSC
- **测试框架**：Jest + Cypress
- **图标生成**：Sharp图像处理
- **构建优化**：Terser代码压缩

## 📊 性能优化

- 图片预加载和懒加载
- 内存管理和清理
- 防抖节流优化
- 代码分割和懒加载
- 移动端性能优化

## 🚀 部署说明

### 开发环境
```bash
# 克隆项目
git clone <repository-url>
cd MalaQuad

# 安装依赖
npm install

# 启动开发服务器
npm run dev
```

### PWA构建
```bash
# 生成PWA图标
npm run generate-icons

# 构建PWA版本
npm run pwa:build

# 预览PWA版本
npm run pwa:preview
```

### 生产部署
```bash
# 生产构建
npm run build:prod

# 预览构建结果
npm run preview

# 部署到Web服务器
npm run deploy:web
```

### 部署要求
- **HTTPS环境**：PWA必须在HTTPS环境下运行
- **静态文件服务**：支持SPA路由的Web服务器
- **缓存策略**：配置适当的缓存头
- **压缩支持**：启用Gzip/Brotli压缩

## 📝 开发指南

### 项目结构
```
MalaQuad/
├── src/
│   ├── components/          # 组件目录
│   │   ├── common/         # 通用组件
│   │   └── Reader/         # 阅读器组件
│   ├── views/              # 页面组件
│   ├── stores/             # Pinia状态管理
│   ├── utils/              # 工具函数
│   ├── types/              # TypeScript类型定义
│   └── styles/             # 样式文件
├── public/                  # 静态资源
├── docs/                   # 项目文档
└── scripts/                # 构建脚本
```

### 开发规范
- **组件开发**：使用Vue 3 Composition API
- **类型安全**：遵循TypeScript类型定义
- **响应式设计**：移动优先的响应式布局
- **错误处理**：完善的错误处理和加载状态
- **性能优化**：图片懒加载、内存管理、代码分割

### 状态管理
- **Pinia Store**：模块化的状态管理
- **数据持久化**：IndexedDB本地存储
- **错误处理**：统一的错误处理机制
- **缓存策略**：智能的数据缓存管理

## 🤝 贡献指南

1. Fork 项目
2. 创建功能分支
3. 提交更改
4. 推送到分支
5. 创建 Pull Request

## 📄 许可证

MIT License

## 🙏 致谢

感谢所有为这个项目做出贡献的开发者们！

---

**麻辣四格** - 让短剧创作更简单！
